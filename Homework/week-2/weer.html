<!--
Name: Jan Huiskes
Student number: 10740929
-->

<canvas id="mycanvas" width="700px" height="500px"></canvas>
<textarea id="rawdata" style="display:none;">
  260,20150101,   30
  260,20150102,   73
  260,20150103,   38
  260,20150104,   39
  260,20150105,   24
  260,20150106,   28
  260,20150107,   45
  260,20150108,   65
  260,20150109,   99
  260,20150110,   95
  260,20150111,   64
  260,20150112,   84
  260,20150113,   86
  260,20150114,   44
  260,20150115,   79
  260,20150116,   55
  260,20150117,   30
  260,20150118,   22
  260,20150119,   10
  260,20150120,    8
  260,20150121,   -5
  260,20150122,  -12
  260,20150123,  -28
  260,20150124,   22
  260,20150125,   37
  260,20150126,   59
  260,20150127,   51
  260,20150128,   53
  260,20150129,   24
  260,20150130,   17
  260,20150131,   10
  260,20150201,   26
  260,20150202,   20
  260,20150203,   17
  260,20150204,    2
  260,20150205,   -7
  260,20150206,   -2
  260,20150207,   15
  260,20150208,   50
  260,20150209,   57
  260,20150210,   57
  260,20150211,   42
  260,20150212,   26
  260,20150213,   46
  260,20150214,   66
  260,20150215,   26
  260,20150216,    9
  260,20150217,   33
  260,20150218,   18
  260,20150219,   35
  260,20150220,   53
  260,20150221,   32
  260,20150222,   32
  260,20150223,   59
  260,20150224,   54
  260,20150225,   48
  260,20150226,   63
  260,20150227,   49
  260,20150228,   51
  260,20150301,   83
  260,20150302,   53
  260,20150303,   44
  260,20150304,   51
  260,20150305,   57
  260,20150306,   66
  260,20150307,   84
  260,20150308,   93
  260,20150309,   88
  260,20150310,   76
  260,20150311,   27
  260,20150312,   54
  260,20150313,   46
  260,20150314,   34
  260,20150315,   56
  260,20150316,   63
  260,20150317,   76
  260,20150318,   56
  260,20150319,   68
  260,20150320,   49
  260,20150321,   64
  260,20150322,   43
  260,20150323,   31
  260,20150324,   57
  260,20150325,   59
  260,20150326,   50
  260,20150327,   57
  260,20150328,   69
  260,20150329,   93
  260,20150330,   72
  260,20150331,   90
  260,20150401,   65
  260,20150402,   63
  260,20150403,   70
  260,20150404,   54
  260,20150405,   53
  260,20150406,   69
  260,20150407,   71
  260,20150408,   86
  260,20150409,  104
  260,20150410,  113
  260,20150411,   90
  260,20150412,  100
  260,20150413,   84
  260,20150414,  119
  260,20150415,  138
  260,20150416,   99
  260,20150417,   85
  260,20150418,   90
  260,20150419,   78
  260,20150420,  109
  260,20150421,  100
  260,20150422,   85
  260,20150423,   94
  260,20150424,  124
  260,20150425,  121
  260,20150426,  106
  260,20150427,   80
  260,20150428,   60
  260,20150429,   89
  260,20150430,   98
  260,20150501,   87
  260,20150502,   97
  260,20150503,  130
  260,20150504,  154
  260,20150505,  154
  260,20150506,  122
  260,20150507,  118
  260,20150508,  142
  260,20150509,  133
  260,20150510,  128
  260,20150511,  176
  260,20150512,  146
  260,20150513,  127
  260,20150514,  112
  260,20150515,   94
  260,20150516,  105
  260,20150517,  119
  260,20150518,  111
  260,20150519,  100
  260,20150520,  105
  260,20150521,  119
  260,20150522,  149
  260,20150523,  124
  260,20150524,  126
  260,20150525,  124
  260,20150526,  118
  260,20150527,  135
  260,20150528,  129
  260,20150529,  111
  260,20150530,  112
  260,20150531,  126
  260,20150601,  127
  260,20150602,  148
  260,20150603,  138
  260,20150604,  156
  260,20150605,  214
  260,20150606,  156
  260,20150607,  139
  260,20150608,  125
  260,20150609,  116
  260,20150610,  154
  260,20150611,  179
  260,20150612,  216
  260,20150613,  175
  260,20150614,  153
  260,20150615,  133
  260,20150616,  114
  260,20150617,  160
  260,20150618,  143
  260,20150619,  127
  260,20150620,  130
  260,20150621,  144
  260,20150622,  127
  260,20150623,  126
  260,20150624,  158
  260,20150625,  182
  260,20150626,  205
  260,20150627,  176
  260,20150628,  173
  260,20150629,  180
  260,20150630,  206
  260,20150701,  260
  260,20150702,  254
  260,20150703,  241
  260,20150704,  256
  260,20150705,  202
  260,20150706,  187
  260,20150707,  198
  260,20150708,  159
  260,20150709,  135
  260,20150710,  165
  260,20150711,  204
  260,20150712,  177
  260,20150713,  174
  260,20150714,  179
  260,20150715,  179
  260,20150716,  196
  260,20150717,  217
  260,20150718,  182
  260,20150719,  162
  260,20150720,  178
  260,20150721,  210
  260,20150722,  195
  260,20150723,  178
  260,20150724,  184
  260,20150725,  149
  260,20150726,  148
  260,20150727,  166
  260,20150728,  152
  260,20150729,  141
  260,20150730,  138
  260,20150731,  133
  260,20150801,  151
  260,20150802,  177
  260,20150803,  215
  260,20150804,  180
  260,20150805,  189
  260,20150806,  205
  260,20150807,  206
  260,20150808,  187
  260,20150809,  186
  260,20150810,  198
  260,20150811,  200
  260,20150812,  195
  260,20150813,  217
  260,20150814,  209
  260,20150815,  184
  260,20150816,  150
  260,20150817,  143
  260,20150818,  146
  260,20150819,  165
  260,20150820,  179
  260,20150821,  197
  260,20150822,  207
  260,20150823,  197
  260,20150824,  179
  260,20150825,  167
  260,20150826,  202
  260,20150827,  157
  260,20150828,  154
  260,20150829,  170
  260,20150830,  200
  260,20150831,  209
  260,20150901,  161
  260,20150902,  132
  260,20150903,  122
  260,20150904,  135
  260,20150905,  132
  260,20150906,  131
  260,20150907,  142
  260,20150908,  139
  260,20150909,  131
  260,20150910,  143
  260,20150911,  143
  260,20150912,  157
  260,20150913,  166
  260,20150914,  145
  260,20150915,  125
  260,20150916,  154
  260,20150917,  144
  260,20150918,  139
  260,20150919,  134
  260,20150920,  135
  260,20150921,  146
  260,20150922,  131
  260,20150923,  132
  260,20150924,  126
  260,20150925,  116
  260,20150926,  104
  260,20150927,  110
  260,20150928,  105
  260,20150929,  117
  260,20150930,  123
  260,20151001,  106
  260,20151002,  103
  260,20151003,  103
  260,20151004,  103
  260,20151005,  131
  260,20151006,  153
  260,20151007,  149
  260,20151008,  124
  260,20151009,  102
  260,20151010,  109
  260,20151011,   65
  260,20151012,   48
  260,20151013,   38
  260,20151014,   51
  260,20151015,   63
  260,20151016,   77
  260,20151017,   81
  260,20151018,   84
  260,20151019,  105
  260,20151020,   95
  260,20151021,   97
  260,20151022,  119
  260,20151023,  114
  260,20151024,  118
  260,20151025,   99
  260,20151026,  105
  260,20151027,  111
  260,20151028,  106
  260,20151029,  107
  260,20151030,  102
  260,20151031,   98
  260,20151101,   77
  260,20151102,   69
  260,20151103,   90
  260,20151104,  122
  260,20151105,  133
  260,20151106,  155
  260,20151107,  164
  260,20151108,  131
  260,20151109,  136
  260,20151110,  145
  260,20151111,  127
  260,20151112,  133
  260,20151113,  114
  260,20151114,   97
  260,20151115,  143
  260,20151116,  125
  260,20151117,  135
  260,20151118,  131
  260,20151119,  112
  260,20151120,   79
  260,20151121,   43
  260,20151122,   26
  260,20151123,   32
  260,20151124,   42
  260,20151125,   54
  260,20151126,   40
  260,20151127,   45
  260,20151128,   67
  260,20151129,  102
  260,20151130,   95
  260,20151201,   97
  260,20151202,  110
  260,20151203,   98
  260,20151204,   94
  260,20151205,   79
  260,20151206,  105
  260,20151207,  105
  260,20151208,   98
  260,20151209,   76
  260,20151210,   59
  260,20151211,   70
  260,20151212,   76
  260,20151213,   68
  260,20151214,   76
  260,20151215,   74
  260,20151216,  114
  260,20151217,  136
  260,20151218,  118
  260,20151219,  122
  260,20151220,  116
  260,20151221,  104
  260,20151222,  130
  260,20151223,  106
  260,20151224,   98
  260,20151225,   96
  260,20151226,  131
  260,20151227,  118
  260,20151228,   89
  260,20151229,   75
  260,20151230,   69
  260,20151231,   78
</textarea>
<script>
// List with all coordinates
var data_points = []
// Split items
var items = document.getElementById("rawdata").value.trim( ).split(/[\s,]+/);
var plot = document.getElementById("mycanvas");
var ctx = plot.getContext("2d");
// Make a list of a coordinate and push it in the list with all coordinates
for (var i = 0; i < items.length; i += 3){
  var data = [];
  // Date must be day (day 0 is Januari first)
  data.push(Math.round((new Date(items[i + 1].substring(0, 4) + "/" + items[i + 1].substring(4, 6) + "/" + items[i + 1].substring(6, 8)).getTime() - 1420066800000) / 86400000));
  data.push(parseFloat(items[i + 2]));
  data_points.push(data)
};

// Transform function
function createTransform(domain, range){

 	var alpha = (range[1]-range[0]) /(domain[1]-domain[0]);
	var beta = range[1] - alpha * domain[1];

	return function(x){
		return alpha * x + beta;
	};
}
// List of months
var month = new Array();
month[0] = "January";
month[1] = "February";
month[2] = "March";
month[3] = "April";
month[4] = "May";
month[5] = "June";
month[6] = "July";
month[7] = "August";
month[8] = "September";
month[9] = "October";
month[10] = "November";
month[11] = "December";

// Transform for x and y
var transformY = createTransform([-80, 350], [plot.height, 0]);
var transformX = createTransform([-40, 375], [0, plot.width])

// Draw elements
ctx.beginPath();

// Draw lines between all coordinates
ctx.moveTo(transformX(data_points[0][0]), transformY(data_points[0][1]));
for (var i = 1; i < data_points.length; i++){
  ctx.lineTo(transformX(data_points[i][0]), transformY(data_points[i][1]));
};

// Axes
ctx.moveTo(transformX(0), transformY(-40));
ctx.lineTo(transformX(365), transformY(-40));
ctx.moveTo(transformX(0), transformY(-40));
ctx.lineTo(transformX(0), transformY(320));

// functions voor days in month
function daysInMonth(month,year) {
    return new Date(year, month, 0).getDate();
}

// Label axes with title and units
ctx.fillText('T (\xBAC)', transformX(-35), transformY(310))
for (var i = 0; i < 8; i++){
  ctx.fillText(30 - i * 5 , transformX(-10), transformY(310 - i * 50));
  ctx.fillText('-', transformX(-2), transformY(310 - i * 50));
};
ctx.fillText('Month', transformX(340), transformY(-75))

// Needed for good amount of days in month
var days = -31;
for (var i = 0; i < 12; i++){
  // Add days in the month to days, days start at 0 on Januari
  days += daysInMonth((i + 1), 2015);
  ctx.fillText("|", transformX(i * 30),transformY(-46))
  ctx.fillText(month[i], transformX(days), transformY(-60));
};

// Plot title
ctx.font = "30px serif";
ctx.fillText("Gemiddelde temperatuur per dag in De Bilt 2015", 100, 50);
ctx.stroke();


</script>
